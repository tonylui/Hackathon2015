<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    <link rel="stylesheet" href="StickyBoard.css">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <div id="user-info"></div>
	<div class="profile_picture, fb-login-button" id="user-logo" data-max-rows="1" data-size="medium" data-show-faces="false" data-auto-logout-link="true"></div>
	<div id="list_of_friends"></div>
	<div style = "display:none" id="list_of_friend_names"></div>
    
    <script>
      
		function statusChangeCallback(response) {
	        if (response.status === 'connected') {
		      updateUserInfo();
			  updateFriendInfo();
		    } else if (response.status === 'not_authorized') {
		      
		      document.getElementById('status').innerHTML = 'Please log into this app.';
		    } else {
		       document.getElementById('status').innerHTML = 'Please log into Facebook.';
		    }
		}
	
	  function checkLoginState() {
	    FB.getLoginStatus(function(response) {
	      statusChangeCallback(response);
	    });
	  }
	
	  window.fbAsyncInit = function() {
	        FB.init({
	          appId      : '1450937555212722',
	          status: true,
	          cookie: true,
	          xfbml: true,
	          oauth: true,
	          version : 'v2.3'
	        });
	        FB.getLoginStatus(statusChangeCallback);
	        FB.Event.subscribe('auth.statusChange', statusChangeCallback); 
	      };
	
	  (function(d, s, id) {
	    var js, fjs = d.getElementsByTagName(s)[0];
	    if (d.getElementById(id)) return;
	    js = d.createElement(s); js.id = id;
	    js.src = "//connect.facebook.net/en_US/sdk.js";
	    fjs.parentNode.insertBefore(js, fjs);
	  }(document, 'script', 'facebook-jssdk'));
	
	   function updateUserInfo() {
	    	var userInfo = document.getElementById('user-info');
		    console.log('Welcome!  Fetching your information.... ');
		    FB.api('/me', function(response) {
		      console.log('Successful login for: ' + response.name);
			  userInfo.innerHTML = '<img src="https://graph.facebook.com/' + response.id + '/picture">' + response.name;
		      document.getElementById('status').innerHTML = 'Thanks for logging in, ' + response.name + '!';
		    });
	  }
	  function updateFriendInfo(){
		    FB.api('/me/friends?limit=<?= $iLimit ?>', function(response) {
		    	var result_holder = document.getElementById('result_friends');
		    	var list_of_friends = document.getElementById('list_of_friends');
	
		    	var friend_data = response.data;
		    	var results = '';
				var friend_names = '';
		    	for (var i = 0; i < friend_data.length; i++) {
		    	       results += '<div><img src="https://graph.facebook.com/' + friend_data[i].id + '/picture">' + friend_data[i].name + '</div>';
					   friend_names += '<div id=\'name_\''+i+'>' + friend_data[i].name + '</div>'
		    	}
		        list_of_friend.innerHTML = '<h2>List of friend names</h2>' + friend_names;
	
		        result_holder.innerHTML = '<h2>Result list of your friends:</h2>' + results;
		    	});
		    	
	    }
        
    </script>


</head>
<body>
    <div ng-app="", ng-controller="">
        

        <div class="container-fluid">
            <div class="navbar-header">
              <a class="navbar-brand" href="#">StickyMash</a>
            </div>
            <div>
                <ul class="nav navbar-nav">
                    <li><a href="#"><span class="glyphicon glyphicon-file"></span> Stick It</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        
                        <form action="/search" method="get">
                            <input type="text" class="form-group" name="q" placeholder="Search Here"/>
                         
                        </form>
                        
                    </li>
                    <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a>
                    <li><button class="btn" onclick="myFacebookLogin()">Login with Facebook</button>


                    </li>
                </ul>
            </div>
        </div>
        <div class="navbar-borderline">

        </div>

        <div class="jumbotron">
                <div class="container">
                    <h1>Hello, world!</h1>
                </div>
        </div>

        <div class="jumbotron">
                <div class="container">
                    <h1>Hello, world!</h1>
                </div>
        </div>
        <div class="jumbotron">
                <div class="container">
                    <h1>Hello, world!</h1>
                </div>
        </div>
        <div class="jumbotron">
                <div class="container">
                    <h1>Hello, world!</h1>
                </div>
        </div>
        <div class="jumbotron">
                <div class="container">
                    <h1>Hello, world!</h1>
                </div>
        </div>

    </div>    
</body>
</html>